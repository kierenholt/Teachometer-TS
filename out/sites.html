<html>
<head> 
	<meta charset="UTF-8"> 
	<link rel="stylesheet" type="text/css" href="style.css">
  <script src=assignment.js></script>
  <script async src="acorn_interpreter.js"></script>


<script>

    function init() {
		

        //settings
		//var settingsString = <?=settingsString?>; //NO QUOTES!!
        //alert("settingsString: "+settingsString);
		//settings = JSON.parse(settingsString);
      var internalSettings = {
        "questionsDiv": document.getElementById("questionsDiv"),
          "allowRowDelete" : false,
          "allowRefresh" : false,
          "submitOnlyOnce" : false,
          "submitButtonText" : "check answers",
          "showRowTitles" : true,
          "allowGridlines" : false
      };

  		var markbookSettings = {
        "url" : "url2",
        "author" : "author2", 
        "score attempted questions only":"ON",
        "shuffle": "ON",
        "truncate": -1,
        "check limit": 1,
        "time limit": -1,
        "total mark limit": -1,
        "journal mode": "OFF",
        "allow refresh": "ON",
        "append stored responses": "ON",
        "scoreHeaders": ["% attempted","% correct"],
        "scores": ["1"]
        };
        markbookSettings.user = "<?=user?>";
        markbookSettings.workbookId = "<?=workbookId?>";
        markbookSettings.sheetName = "<?=sheetName?>";
        
        //responses
        
        var responsesString = `["11","10","9","8","7","6","0","0","0","0","0","0","0","0","0","0","0","0"]`;//`["B","2","2","1"]`;
        if (responsesString) {
          markbookSettings.responses = JSON.parse(responsesString);
        }
        
        //rows
        var rowsString = `[{"purpose":"notes","leftRight":["left","right"],"title":"title","comment":"comment"},{"purpose":"notes","leftRight":["![](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\\n@[10,20](RELATIVE)","__"],"title":"relative container","comment":""},{"purpose":"question","leftRight":["\\n\\t\\t\\twhat colour is the sky ? A. red B. blue C. something else\\n\\t\\t\\twhat colour is the sky? ____\\n\\t\\t\\twhat colour is the sky? {red/green/blue}\\n\\t\\t\\t",""],"title":"question types - check correct columns are updated in markbook","comment":"B\\nblue\\nblue\\n"}]`;
        var rowsString = `[{"purpose":"notes","leftRight":["left","right\\n*bullet1\\n*bullet 2\\n not a bullet *\\n\\n*bullet 3\\n\\n\\t\\t\\t"],"title":"title","comment":"comment"},{"purpose":"template","leftRight":[" $$ $$ $$ $$",""],"title":"atand template","comment":"atand(1,1)\\n\\t\\tatand(1,-1)\\n\\t\\tatand(-1,-1)\\n\\t\\tatand(-1,1)\\n"},{"purpose":"template","leftRight":["what is the remainder of $$ when it is divided by $$? ____",""],"title":"simple template","comment":"1e9..1e10 //a comment\\n3,4,5,6,9 //another comment\\na%b"},{"purpose":"notes","leftRight":["![](https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\\n@[10,20](RELATIVE)","__"],"title":"relative container","comment":""},{"purpose":"question","leftRight":["\\n\\t\\t\\twhat colour is the sky ? A. red B. blue C. something else\\n\\t\\t\\twhat colour is the sky? ____\\n\\t\\t\\twhat colour is the sky? {red/green/blue}\\n\\t\\t\\t",""],"title":"question types - check correct columns are updated in markbook","comment":"B\\nblue\\nblue\\n"},{"purpose":"notes","leftRight":["\\n\\ncode\\ngoes here\\n    indent\\n        indent\\n        ___ shouldnt be input box ?\\n\\n",""],"title":"code needs to respect white space","comment":""},{"purpose":"template","leftRight":["__ + __ = ££",""],"title":"late evaluation","comment":"variable(\\"A\\")\\nvariable(\\"B\\")\\nA + B\\n"},{"purpose":"template","leftRight":["normal template\\n\\t\\t\\t$$ + $$ =&gt; __\\n\\t\\t\\t$$ includes $$ =&gt; $$\\n\\t\\t\\t",""],"title":"normal template, includes character","comment":"22..44\\n22..44//\\na+b\\n\\"ww\\",\\"ss\\"\\n\\"w\\"\\nincludes(d,e)\\n"},{"purpose":"template","leftRight":["Given a string (parameter 1) return true if it is the weekend\\n\\n_code_\\n\\n_____________________\\n\\n_enter custom parameters here_\\n\\nisTheWeekend(__) =&gt; ££\\nisTheWeekend([2,3]) =&gt; ££\\nisTheWeekend([2,3]) == 1 []","\\n"],"title":"code","comment":"code(\\"isTheWeekend\\")\\nvariable(\\"B\\")\\nisTheWeekend(B)\\nisTheWeekend([2,3])\\nisTheWeekend([2,3]) == 1\\n"},{"purpose":"template","leftRight":["varying link: [google]($$) \\t\\t\\t",""],"title":"templated link","comment":"\\"www.google.com\\""},{"purpose":"template","leftRight":["![google]($$)",""],"title":"templated image","comment":"\\"https://i.imgur.com/K5bKuxQ.jpg\\""},{"purpose":"template","leftRight":["$$ = {odd/even}",""],"title":"template with if","comment":"1..9\\nif((a%2==0),\\"even\\",\\"odd\\")"},{"purpose":"template","leftRight":["Kev attempted four free dives. Freediving is when you try to go as deep as you can underwater in a single breath. \\nThe depths he achieved were: $$, $$, $$, and $$m\\n\\nWhat was his average depth? ___ m",""],"title":"too many dps","comment":"e+(-50..50)*0.01\\ne+(-50..50)*0.01\\ne+(-50..50)*0.01\\n4*e-a-b-c\\n(3000..5000)*0.01"},{"purpose":"template","leftRight":["__________________________ \\n_result_\\n££",""],"title":"console","comment":"code(\\"console\\")\\nconsole()"},{"purpose":"sudoku","leftRight":["$$ $$ $$ $$",""],"title":"sudoku","comment":"2..9\\na + 2\\nb + 2\\nc + 2\\n    "}]`;
           //markbookupdate`
        var userRow = Number(2); //NO QUOTES!!!
        if (userRow > 0) {
          var markbookUpdateInjector = function(workbookId, sheetName, _userRow) {
            var workbookId = workbookId;
            var sheetName = sheetName;
            var userRow = _userRow;
        
            return function(markbookColumn, response, color, append, scores) {
              					let str = (`${workbookId},${sheetName}
userRow:${userRow}
markbookColumn:${markbookColumn}
response:${response}
color: ${color}
append:  ${append}
score: ${scores}`);
              					let shortstr = (`
markbookColumn:${markbookColumn} response:${response} append: ${append} score: ${scores}`);
              //alert(str);
              document.getElementById("feedback").value += shortstr;
              
            };
          }
        
          markbookSettings.markbookUpdate = markbookUpdateInjector(markbookSettings.workbookId,markbookSettings.sheetName,userRow);
        };

		/*** CALL CONSTRUCTOR ***/
		window.assignment = new AssignmentHTML(internalSettings,markbookSettings);
		window.assignment.consumeRowsString(rowsString);

    }

</script>

</head>
<body onload="init()">
	 
	<br>
	<textarea id="feedback"></textarea>


  <div id="questionsDiv">
    </div>


</body>
</html>